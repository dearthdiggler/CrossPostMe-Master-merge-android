# CrossPostMe Render Deployment Guide

## Overview

Deploy CrossPostMe to Render's free tier with automatic builds and deployments from GitHub.

## Prerequisites

- GitHub account with your CrossPostMe repository
- Render account (free): https://render.com
- Social media API credentials

## Quick Setup

### 1. Connect to Render

1. Go to https://render.com and sign up with GitHub
2. Click "New +" â†’ "Blueprint"
3. Connect your GitHub repository: `dearthdiggler/CrossPostMe-Final`
4. Render will automatically detect the `render.yaml` file

### 2. Configure Environment Variables

Add these in Render Dashboard â†’ Service â†’ Environment:

**Required:**

```bash
DATABASE_URL=postgresql://user:pass@host:port/db  # Auto-generated by Render
REDIS_URL=redis://host:port                       # Auto-generated by Render
JWT_SECRET=your-secret-key                        # Generate random 32-char string
WEBHOOK_SECRET=your-webhook-secret               # Generate random 32-char string
```

**Social Platform APIs:**

```bash
TWITTER_API_KEY=your-twitter-key
TWITTER_API_SECRET=your-twitter-secret
LINKEDIN_CLIENT_ID=your-linkedin-id
LINKEDIN_CLIENT_SECRET=your-linkedin-secret
FACEBOOK_APP_ID=your-facebook-id
FACEBOOK_APP_SECRET=your-facebook-secret
INSTAGRAM_ACCESS_TOKEN=your-instagram-token
```

### 3. Project Structure

Ensure your project has this structure:

```
/
â”œâ”€â”€ main.py              # FastAPI app entry point
â”œâ”€â”€ requirements.txt     # Python dependencies
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ worker.py        # Celery worker configuration
â”‚   â”œâ”€â”€ adapters/        # Social platform adapters
â”‚   â”œâ”€â”€ auth/           # OAuth handlers
â”‚   â””â”€â”€ scheduler/      # Queue management
â””â”€â”€ render.yaml         # Render configuration
```

### 4. Required Files

**requirements.txt:**

```txt
fastapi==0.104.1
uvicorn[standard]==0.24.0
celery==5.3.4
redis==5.0.1
psycopg2-binary==2.9.9
sqlalchemy==2.0.23
alembic==1.12.1
python-jose[cryptography]==3.3.0
python-multipart==0.0.6
requests==2.31.0
pydantic==2.5.0
```

**main.py:**

```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI(title="CrossPostMe API", version="1.0.0")

# CORS middleware for frontend integration
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # Configure for production
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

@app.get("/health")
async def health_check():
    return {"status": "healthy", "service": "crosspostme-api"}

@app.get("/")
async def root():
    return {"message": "CrossPostMe API - Ready for cross-platform posting!"}

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

### 5. Deploy

1. Push your code to GitHub
2. In Render Dashboard, your services will auto-deploy
3. Monitor build logs for any issues
4. Access your API at: `https://your-service-name.onrender.com`

## Service Configuration

### Web Service (API)

- **Type:** Web Service
- **Environment:** Python
- **Build Command:** `pip install -r requirements.txt`
- **Start Command:** `uvicorn main:app --host 0.0.0.0 --port $PORT`
- **Health Check:** `/health`

### Worker Service (Background Jobs)

- **Type:** Background Worker
- **Build Command:** `pip install -r requirements.txt`
- **Start Command:** `celery -A app.worker worker --loglevel=info`

### Database Services

- **PostgreSQL:** Primary database for user data and posts
- **Redis:** Queue management and caching

## Scaling & Production

- **Free Tier Limits:** 750 hours/month, sleeps after 15min inactivity
- **Upgrade:** $7/month for always-on services
- **Monitoring:** Built-in metrics and logs in Render dashboard

## Troubleshooting

**Build Failures:**

- Check `requirements.txt` for correct versions
- Verify Python version compatibility (3.8+)
- Review build logs in Render dashboard

**Environment Issues:**

- Ensure all required env vars are set
- Check database connection strings
- Verify API credentials format

**Performance:**

- Monitor response times in Render metrics
- Check Celery worker logs for queue processing
- Scale workers if needed for high volume

## Local Development

```bash
# Setup local environment
pip install -r requirements.txt
export DATABASE_URL="postgresql://localhost/crosspostme_dev"
export REDIS_URL="redis://localhost:6379"

# Run API server
uvicorn main:app --reload

# Run worker (separate terminal)
celery -A app.worker worker --loglevel=info
```

## Next Steps

1. Configure OAuth flows for each social platform
2. Implement content transformation pipelines
3. Set up monitoring and alerting
4. Add comprehensive testing suite
5. Configure custom domain (optional)

Your CrossPostMe application is now ready for cross-platform social media posting! ðŸš€
